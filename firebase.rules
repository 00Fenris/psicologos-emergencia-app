service cloud.firestore {
  match /databases/{database}/documents {
    // Solo usuarios autenticados pueden leer y escribir su propia disponibilidad
    match /disponibilidad/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
    }
    // Solo el usuario puede leer/escribir su propio perfil
    match /usuarios/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Solo participantes pueden leer/escribir en la conversaci√≥n
    match /conversaciones/{convId} {
      allow read, write: if request.auth != null &&
        (convId == request.auth.uid + '_coordinador' || convId.endsWith('_coordinador'));
    }
  }
}
